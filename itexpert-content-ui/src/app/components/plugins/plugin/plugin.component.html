<div mat-dialog-title class="dialog-title">
  <mat-toolbar> <span>{{ "PLUGINS" | translate }}</span>
  </mat-toolbar>
</div>

<div mat-dialog-content>
  <p>
    <button mat-fab aria-label="create new project" class="icon-display" *ngIf="userAccessService.isAdmin()" (click)="create()">
      <mat-icon>add</mat-icon>
    </button>
  </p>

  <table mat-table [dataSource]="dataSource" class="mat-elevation-z1"> <ng-container matColumnDef="Status">
    <th mat-header-cell *matHeaderCellDef> {{ "ACTIVE" | translate }}</th>
    <td mat-cell *matCellDef="let element">
      <mat-slide-toggle
        [checked]="element.enabled"
        aria-label="Plugin status"
        matTooltip="{{ element.enabled ? ('ACTIVE' | translate) : ('INACTIVE' | translate) }}">
      </mat-slide-toggle>
    </td>
  </ng-container>

    <ng-container matColumnDef="Name">
      <th mat-header-cell *matHeaderCellDef> {{ "NAME" | translate }}</th>
      <td mat-cell *matCellDef="let element">
        <span [matTooltip]="'Code: ' + element.code"> {{ element.name }}
        </span>
      </td>
    </ng-container>

    <ng-container matColumnDef="Description">
      <th mat-header-cell *matHeaderCellDef> {{ "DESCRIPTION" | translate }}</th>
      <td mat-cell *matCellDef="let element">
        <span [matTooltip]="element.description"> {{ element.description | slice:0:50 }}{{ element.description?.length > 50 ? '...' : '' }}
        </span>
      </td>
    </ng-container>

    <ng-container matColumnDef="Actions">
      <th mat-header-cell *matHeaderCellDef> {{ "ACTIONS" | translate }}</th>
      <td mat-cell *matCellDef="let element">
        <button mat-icon-button color="primary" *ngIf="userAccessService.canEdit()" (click)="update(element)"
                [matTooltip]="'EDIT' | translate" type="button" aria-label="Edit plugin">
          <mat-icon>edit</mat-icon>
        </button>

        <button mat-icon-button color="warn" *ngIf="userAccessService.canDelete()" (click)="delete(element)"
                [matTooltip]="'DELETE' | translate" type="button" aria-label="Delete plugin">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true;"></tr>

    <tr mat-row *matRowDef="let row; columns: displayedColumns;"
        [ngClass]="{'make-gold': row.IsGranted }"> </tr>

    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" [attr.colspan]="displayedColumns.length">
        {{ "NO_DATA_AVAILABLE" | translate }}
      </td>
    </tr>

  </table>

</div>
